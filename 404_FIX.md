# Fixing 404 NOT_FOUND Error on Vercel

## Problem
Getting `404: NOT_FOUND` error when accessing the deployed application.

## Solutions Applied

### 1. Fixed Frontend API URL
**File**: `src/frontend/src/services/api.js`

**Before:**
```javascript
const API_BASE_URL = import.meta.env.VITE_API_URL || 
  (import.meta.env.DEV ? '/api' : 'http://localhost:8000');
```

**After:**
```javascript
const API_BASE_URL = import.meta.env.VITE_API_URL || '/api';
```

**Why**: In production on Vercel, the API is at `/api`, not `http://localhost:8000`.

### 2. Fixed Vercel Routing
**File**: `vercel.json`

**Updated routes to:**
1. API routes (`/api/*`) → Python serverless function
2. Static assets (JS, CSS, images) → Serve from `dist/`
3. All other routes → Serve `index.html` (for React Router)

## Testing

After redeploying, test:

1. **Root URL**: `https://your-app.vercel.app/`
   - Should show your React app

2. **API Health**: `https://your-app.vercel.app/api/health`
   - Should return: `{"status":"ok","message":"Service is healthy"}`

3. **API Docs**: `https://your-app.vercel.app/api/docs`
   - Should show FastAPI Swagger UI

## Common 404 Causes

### 1. Frontend Not Built
- Check if `src/frontend/dist/` exists after build
- Verify build completed successfully in Vercel logs

### 2. Wrong Output Directory
- Should be: `src/frontend/dist`
- Check `vercel.json` config

### 3. API Routes Not Working
- Check Vercel Functions tab
- Look for errors in function logs
- Verify `api/index.py` exists

### 4. Environment Variables Missing
- Check Vercel Dashboard → Environment Variables
- Required: `GROQ_API_KEY`, `MONGO_URI`, `VOYAGE_API_KEY`

## Debugging Steps

1. **Check Build Logs**:
   - Vercel Dashboard → Deployments → Click on deployment
   - Look for errors in build output

2. **Check Function Logs**:
   - Vercel Dashboard → Functions tab
   - Click on a function to see logs

3. **Test API Directly**:
   ```bash
   curl https://your-app.vercel.app/api/health
   ```

4. **Check Browser Console**:
   - Open DevTools → Network tab
   - See which requests are failing

## If Still Getting 404

1. **Verify Deployment**:
   - Check if deployment completed successfully
   - Look for any build errors

2. **Check Routes Order**:
   - API routes must come before catch-all route
   - Static assets before index.html fallback

3. **Verify File Structure**:
   ```
   api/
     └── index.py
   src/
     └── frontend/
         └── dist/
             └── index.html
   ```

4. **Clear Cache**:
   - Hard refresh browser (Ctrl+Shift+R or Cmd+Shift+R)
   - Or test in incognito mode

## Next Steps

1. Commit and push changes:
   ```bash
   git add src/frontend/src/services/api.js vercel.json
   git commit -m "Fix 404 error - update API URL and routing"
   git push
   ```

2. Wait for Vercel to redeploy

3. Test the deployment

